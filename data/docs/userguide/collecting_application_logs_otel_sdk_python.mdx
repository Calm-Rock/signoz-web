---
date: 2024-12-18
title: Collecting Application Logs Using OTEL Python SDK
id: collecting_application_logs_otel_sdk_python
hide_table_of_contents: true
---

You can directly send logs of your application to SigNoz using the Python SDKs provided by OpenTelemetry. Below is an example of how to set it up effectively.

<Admonition>
The default logging level in Python is WARNING. To send all logs to SigNoz, change the default log level to DEBUG.

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```
</Admonition>

<Tabs entityName="plans">

<TabItem value="signoz-cloud" label="SigNoz Cloud" default>

## For SigNoz Cloud

To send logs to SigNoz Cloud, set the following environment variables before running your application:

1. **OTEL_EXPORTER_OTLP_ENDPOINT**:
   Set this environment variable to `https://ingest.{region}.signoz.cloud:443`. Replace `{region}` with the region of your choice from the table below:

   | Region | Endpoint                   |
   | ------ | -------------------------- |
   | US     | ingest.us.signoz.cloud:443 |
   | IN     | ingest.in.signoz.cloud:443 |
   | EU     | ingest.eu.signoz.cloud:443 |

2. **OTEL_EXPORTER_OTLP_HEADERS**:
   Set this to `signoz-access-token=<SIGNOZ_INGESTION_KEY>`, where `<SIGNOZ_INGESTION_KEY>` is your ingestion key.

3. **Run Command**:
   Use the following command to run your script:

   ```bash
   OTEL_EXPORTER_OTLP_ENDPOINT="https://ingest.{region}.signoz.cloud:443" OTEL_EXPORTER_OTLP_HEADERS="signoz-access-token=<SIGNOZ_INGESTION_KEY>" python3 example.py
   ```

</TabItem>

</Tabs>

## Prerequisites

Before running your application, ensure that the required dependencies are installed. Use the following commands to install them via pip:

```bash
pip install opentelemetry-api
pip install opentelemetry-sdk
pip install opentelemetry-exporter-otlp
```

## Example Code

Here is an example script for setting up OpenTelemetry logging in Python:

```python
import logging
from opentelemetry import trace
from opentelemetry.exporter.otlp.proto.grpc._log_exporter import (
    OTLPLogExporter,
)
from opentelemetry.sdk._logs import (
    LogEmitterProvider,
    LoggingHandler,
    set_log_emitter_provider,
)
from opentelemetry.sdk._logs.export import BatchLogProcessor
from opentelemetry.sdk.resources import Resource
from opentelemetry.sdk.trace import TracerProvider
from opentelemetry.sdk.trace.export import (
    BatchSpanProcessor,
    ConsoleSpanExporter,
)

trace.set_tracer_provider(TracerProvider())
trace.get_tracer_provider().add_span_processor(
    BatchSpanProcessor(ConsoleSpanExporter())
)

log_emitter_provider = LogEmitterProvider(
    resource=Resource.create(
        {
            "service.name": "shoppingcart",
            "service.instance.id": "instance-12",
        }
    ),
)
set_log_emitter_provider(log_emitter_provider)

exporter = OTLPLogExporter(insecure=True)
log_emitter_provider.add_log_processor(BatchLogProcessor(exporter))
log_emitter = log_emitter_provider.get_log_emitter(__name__, "0.1")
handler = LoggingHandler(level=logging.NOTSET, log_emitter=log_emitter)

# Attach OTLP handler to root logger
logging.getLogger().addHandler(handler)

# Log directly
logging.info("Jackdaws love my big sphinx of quartz.")

# Create different namespaced loggers
logger1 = logging.getLogger("myapp.area1")
logger2 = logging.getLogger("myapp.area2")

logger1.debug("Quick zephyrs blow, vexing daft Jim.")
logger1.info("How quickly daft jumping zebras vex.")
logger2.warning("Jail zesty vixen who grabbed pay from quack.")
logger2.error("The five boxing wizards jump quickly.")

# Trace context correlation
tracer = trace.get_tracer(__name__)
with tracer.start_as_current_span("foo"):
    # Do something
    logger2.error("Hyderabad, we have a major problem.")

log_emitter_provider.shutdown()
```
